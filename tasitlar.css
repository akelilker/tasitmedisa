/* =========================================
   TAŞITLAR MODAL CSS - Ortak kurallar style-core.css'te; burada sadece sayfa özel override'lar
   ========================================= */

/* === ORTAK MODAL YAPISI (sınıf ile; liste & detay) === */
.tasitlar-modal-overlay {
    display: none !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    background: transparent !important;
    z-index: 9999 !important;
    flex-direction: column !important;
    justify-content: flex-start !important;
    align-items: center !important;
    pointer-events: none !important;
    padding-top: env(safe-area-inset-top, 0px) !important;
    padding-bottom: env(safe-area-inset-bottom, 0px) !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    height: 100vh;
    height: 100dvh;
    overflow: hidden !important;
    touch-action: pan-y !important;
}

.tasitlar-modal-overlay.active,
.tasitlar-modal-overlay.open {
    display: flex !important;
    pointer-events: auto !important; /* Aktif olduğunda tıklamaları al */
}

/* Şube kartı hover üstten kesilmesin –- taşıtlar modalında overflow serbest */
#vehicles-modal.tasitlar-modal-overlay.active,
#vehicles-modal.tasitlar-modal-overlay.open {
    overflow: visible !important;
}
#vehicles-modal .modal-container {
    overflow: visible !important;
}

/* Vehicle Detail Modal: scroll modal-body'de, yan taşmaya izin (ortak kurallar style-core'da) */
#vehicle-detail-modal .modal-container {
    overflow: hidden !important;
    overflow-x: visible !important;
}

/* Muayene tarihi input: Kaydet butonu ile yatayda hizalı (aynı genişlik) */
#muayene-guncelle-modal .muayene-tarih-row {
  display: flex !important;
  justify-content: center !important;
}
#muayene-guncelle-modal .muayene-tarih-inner {
  width: 390px;
  max-width: 100%;
  box-sizing: border-box;
}
#muayene-guncelle-modal #muayene-tarih {
  width: 190px !important;
  max-width: 190px !important;
  min-width: 165px !important;
  box-sizing: border-box !important;
}
#muayene-tarih {
  min-width: 165px !important;
  box-sizing: border-box !important;
}

/* Olay Ekle modallarında tüm tarih inputları – gg.aa.yyyy kutudan taşmasın */
.olay-ekle-modal .modal-body input[type="date"].form-input,
.olay-ekle-modal .modal-body .olay-tarih-input {
  position: relative !important; /* Takvim simgesi absolute ile buna göre ortalanır */
  width: 190px !important;
  max-width: 190px !important;
  min-width: min(165px, 100%) !important;
  box-sizing: border-box !important;
  overflow: hidden !important;
  font-size: 11px !important;
  padding: 5px 28px 5px 10px !important;
  text-align: left !important;
}
.olay-ekle-modal .modal-body input[type="date"].form-input::-webkit-datetime-edit,
.olay-ekle-modal .modal-body .olay-tarih-input::-webkit-datetime-edit {
  font-size: 11px !important;
  max-width: 100% !important;
  box-sizing: border-box !important;
}
.olay-ekle-modal .modal-body input[type="date"].form-input::-webkit-datetime-edit-fields-wrapper,
.olay-ekle-modal .modal-body .olay-tarih-input::-webkit-datetime-edit-fields-wrapper {
  padding: 0 !important;
  max-width: 100% !important;
  box-sizing: border-box !important;
}

/* Olay Ekle (Bakım, Kaza vb.): tarih metni ve takvim ikonu dikey ortada */
.olay-ekle-modal .modal-body input[type="date"].form-input::-webkit-datetime-edit,
.olay-ekle-modal .modal-body .olay-tarih-input::-webkit-datetime-edit,
.olay-ekle-modal .modal-body input[type="date"].form-input::-webkit-datetime-edit-fields-wrapper,
.olay-ekle-modal .modal-body .olay-tarih-input::-webkit-datetime-edit-fields-wrapper {
  display: flex !important;
  align-items: center !important;
  height: 100% !important;
  min-height: 100% !important;
  margin: 0 !important;
}
.olay-ekle-modal .modal-body input[type="date"].form-input::-webkit-calendar-picker-indicator,
.olay-ekle-modal .modal-body .olay-tarih-input::-webkit-calendar-picker-indicator {
  position: absolute !important;
  right: 6px !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
  margin: 0 !important;
  cursor: pointer !important;
}

/* Olay Ekle 14 modal: Taşıtlar modalı ile aynı yapı (500px, footer 54px, çerçeve) */
.olay-ekle-modal .modal-container {
    max-width: 500px !important;
    width: 100%;
    background: var(--modal-bg) !important;
    border: 0.5px solid var(--border-medium) !important;
    box-shadow: 0 0 40px var(--shadow-modal) !important;
    border-radius: var(--modal-radius) !important;
    margin: max(12px, env(safe-area-inset-top)) auto 54px auto !important;
    height: calc(100vh - max(12px, env(safe-area-inset-top)) - 54px) !important;
    height: calc(100dvh - max(12px, env(safe-area-inset-top)) - 54px) !important;
    max-height: calc(100vh - max(12px, env(safe-area-inset-top)) - 54px) !important;
    max-height: calc(100dvh - max(12px, env(safe-area-inset-top)) - 54px) !important;
    overflow: hidden !important;
    overflow-x: hidden !important;
    touch-action: pan-y !important; /* İçeride dikey kaydırma çalışsın */
    display: flex !important;
    flex-direction: column !important;
}
/* Olay Ekle (Kaza, Bakım vb.): modal gövdesi mutlaka kayar, üst görünsün */
.olay-ekle-modal .modal-body {
    flex: 1 1 auto !important;
    min-height: 0 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    touch-action: pan-y !important;
    overscroll-behavior-y: contain !important;
    padding-top: 20px !important; /* Üst içerik kesilmesin */
}

/* Kaza Modalı Özel İçerik Düzeni (Ekle + Güncelle) */
#kaza-guncelle-modal .modal-body,
#kaza-ekle-modal .modal-body {
    display: flex !important;
    flex-direction: column !important;
    justify-content: flex-start !important;
    overflow-y: auto !important;
    padding-bottom: 20px !important;
}

/* Şemayı saran kapsayıcı hizalama */
#kaza-guncelle-modal #kaza-kaporta-container,
#kaza-ekle-modal #kaza-kaporta-container {
    margin-top: -7px !important;
    margin-bottom: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    width: 100% !important;
}
#kaza-guncelle-modal #kaza-kaporta-container .boya-legend,
#kaza-ekle-modal #kaza-kaporta-container .boya-legend {
    margin-top: 0 !important;
}

/* Hasar Gören Parça etiketi: Hasar Tutarı ile aynı sol hizada; üstteki dikey boşluğu kapat */
#kaza-ekle-modal .modal-body .kaza-kaporta-row,
#kaza-guncelle-modal .modal-body .kaza-kaporta-row {
    width: 100% !important;
    padding-left: 0 !important;
    margin-left: 0 !important;
    margin-top: -9px !important; /* 12px gap’i 4px’e indir – üstteki boşluğu kullan */
    box-sizing: border-box !important;
}
/* "H" (Hasar...) ilk harfi = 5.000 inputunun sol dikey çerçevesi ile aynı hizada; metin–şema arası 4px */
#kaza-ekle-modal .kaza-kaporta-label,
#kaza-guncelle-modal .kaza-kaporta-label {
    display: block !important;
    text-align: left !important;
    margin-left: 0 !important;
    padding-left: 55px !important; /* Sol çerçeve ile label arası 55px */
    font-size: 14px !important;
    margin-bottom: 0 !important;
    box-sizing: border-box !important;
}

/* Kaza modalı buton grubu: şemadan 10px aşağıda */
#kaza-guncelle-modal .universal-btn-group,
#kaza-ekle-modal .universal-btn-group {
    margin-top: 10px !important; /* Şemadan 10px aşağıda */
    flex-shrink: 0 !important;
    background: var(--bg) !important;
}

/* === MODAL ÖZEL FARKLAR === */

/* Detay modal: karartma yok */
#vehicle-detail-modal.tasitlar-modal-overlay::before {
    display: none;
}

/* Taşıt modalları: karartma (liste + olay modalları) */
.tasitlar-modal-overlay::before {
    content: '';
    position: absolute;
    top: max(12px, env(safe-area-inset-top));
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 500px;
    height: calc(100vh - max(12px, env(safe-area-inset-top)) - 54px);
    height: calc(100dvh - max(12px, env(safe-area-inset-top)) - 54px);
    background: var(--shadow-overlay);
    backdrop-filter: blur(5px);
    z-index: -1;
    pointer-events: none;
}
.olay-ekle-modal.tasitlar-modal-overlay::before {
    max-width: 500px; /* Olay Ekle modalları Taşıtlar ile aynı */
}
/* ayarlar-modal-overlay ::before display:none ezer - Olay Ekle karartma gösterilsin */
.olay-ekle-modal.tasitlar-modal-overlay.ayarlar-modal-overlay::before {
    display: block !important;
}

/* === DETAY İÇERİK === */
#vehicle-detail-content {
    padding: 20px;
    padding-top: 18px !important;
    padding-bottom: 20px;
    padding-left: 18px; /* Container çerçevelerine 2px boşluk (16px → 18px) */
    padding-right: 18px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0; /* Boşluklar manuel ayarlanacak */
    overflow: visible !important; /* Scroll modal-body'de */
    flex: 1;
}

/* Plaka satırı - plaka ortada */
.detail-plate-row {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    min-height: fit-content; /* İçeriğe göre yükseklik */
    height: auto; /* İçeriğe göre yükseklik */
    margin-top: -20px !important; /* Plaka 3px daha yukarı (-17px → -20px) */
    margin-bottom: 3px !important; /* Plaka-marka arası 3px */
    position: relative; /* Absolute "Olay Ekle" butonu için gerekli */
    z-index: 1;
}

.detail-plate {
    font-size: 15px; /* Plaka 15px */
    font-weight: 700;
    color: var(--txt-light);
    text-align: center;
    width: 100%; /* Tam genişlik */
    letter-spacing: 2px;
    margin: 0; /* Container'daki margin kullanılacak */
}

/* Plaka satırında artık buton yok, sadece plaka var */

/* Taşıt Detay Alt Başlık Satırı: Olay Ekle | Marka/Model | Tarihçe – dikeyde kusursuz hizalı */
.detail-brand-year-row {
    display: flex !important;
    align-items: center !important; /* DİKEYDE KUSURSUZ HİZALAR */
    justify-content: space-between !important;
    flex-wrap: nowrap;
    width: 100% !important;
    margin-top: -9px !important;
    position: relative;
    padding-left: 0;
    padding-right: 0;
}

.detail-brand-year {
    font-size: 15px;
    font-weight: 600;
    color: var(--txt-gray);
    text-align: center;
    line-height: 1 !important; /* Dikey kaymayı önler, satırla aynı hizada */
    margin: 0 !important;
    flex: 1;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%); /* Yatay + dikey ortala, butonlarla aynı hizada */
    pointer-events: none;
}

.history-btn-minimal {
    background: transparent !important;
    border: none !important;
    padding: 0 !important;
    color: var(--txt-gray);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 12px; /* 1pt büyütüldü (11px → 12px varsayılan body font-size'a göre) */
}
.history-btn-minimal:hover { color: var(--txt-white); }
.history-btn-minimal svg { display: block; }

/* === İKİ KOLONLU LAYOUT === */
.vehicle-detail-columns {
    display: flex;
    gap: 10px; /* Kolonlar arası boşluk (20px → 10px) */
    width: 100%;
    margin-top: 16px; /* Marka/Model'den sonra 16px boşluk */
    align-items: flex-start; /* Üstten hizalama */
}

.vehicle-detail-left {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0; /* Bölümler arası boşluk padding ile kontrol edilecek (12px → 0) */
    padding-right: 2px; /* Kırmızı çizgi ile arasındaki boşluk (toplam 4px için: 2px) */
    border-right: 1px solid rgba(var(--theme-color-rgb), 0.28);
    box-shadow: 10px 0 18px -18px rgba(var(--theme-color-rgb), 0.45);
    min-width: 0; /* Flex item'in küçülmesine izin ver */
    box-sizing: border-box; /* Border'ı genişliğe dahil et */
}

.vehicle-detail-right {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0; /* Bölümler arası boşluk padding ile kontrol edilecek (12px → 0) */
    padding-left: 2px; /* Kırmızı çizgi ile arasındaki boşluk (toplam 4px için: 2px) */
    min-width: 0; /* Flex item'in küçülmesine izin ver */
    box-sizing: border-box; /* Padding'i genişliğe dahil et */
}

.detail-row {
    display: flex;
    flex-direction: row;
    align-items: baseline;
    gap: 4px; /* Daha da azaltıldı (1px → 0.5px) */
    padding: 2px 0; /* 2px üst, 2px alt (4px 0 → 2px 0) */
    border-bottom: none;
    min-width: 0;
    flex-wrap: wrap;
}

/* Tramer "var" çoklu kayıt: label+colon üstte, value altta */
.detail-row-block {
    flex-direction: column !important;
    gap: 0.5px !important;
    align-items: flex-start !important;
}
.detail-row-block .detail-row-header {
    display: flex;
    align-items: baseline;
    gap: 4px;
}

.detail-row-colon {
    flex-shrink: 0;
    white-space: nowrap;
    color: inherit;
}

/* Boya şeması container – taşıt detayda sol grid (sol kolon) içinde; büyüklük sol kolona göre uyarlanır */
#detail-boya-container {
    width: 100% !important;
    min-height: 140px;
    margin: 12px 0 0 0 !important;
    padding: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    justify-content: flex-start !important;
    gap: 3px !important; /* Şema ile legend arası dikey boşluk 3px */
    row-gap: 3px !important;
    overflow: visible !important;
    box-sizing: border-box !important;
}

/* Şemayı saran kutu: sol yaslı, sağ kenar Yoktur metninin "r" harfine dikeyde paralel (max-width ile oranlanır); %20 küçültme */
.kaporta-schema-wrapper {
    width: 136px !important; /* 170 * 0.8 */
    display: block !important;
    margin: 0 !important;
    margin-right: auto !important;
    position: relative !important;
    max-width: calc(100% - 1.2em) !important;
    box-sizing: border-box !important;
}

/* Renk açıklamaları – şemadan 3px altında */
.boya-legend {
    margin-top: 3px !important;
    display: flex !important;
    gap: 15px !important;
    justify-content: center !important;
}
.boya-legend-item {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 11px;
    color: var(--txt-placeholder);
}
.boya-legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
    flex-shrink: 0;
}

/* Şemayı saran kutu (detay dışında 136px; detayda JS ile Yoktur "r" hizası; %20 küçültme) */
.kaporta-schema-wrapper {
    width: 136px;
    display: block !important;
    margin: 0 auto;
    margin-top: 5px !important; /* Şemayı 5px yukarı kaydır */
    position: relative !important;
}
#detail-boya-container .kaporta-schema-wrapper {
    margin: 0 !important;
    margin-right: auto !important;
    margin-top: 5px !important;
}
#detail-boya-container .boya-legend {
    justify-content: flex-start !important;
    margin-top: 0 !important; /* Boşluk container gap ile 3px */
}

.detail-row-label {
    display: block;
    font-size: 14px; /* +1pt (13px → 14px) */
    font-weight: 600;
    color: var(--form-label-color);
    margin-bottom: 0; /* Kayıt modundaki form-label ile aynı */
    line-height: 1.4; /* Value ile aynı line-height */
}

.detail-row-value {
    font-family: inherit;
    font-size: 14px; /* +1pt (13px → 13px */
    color: var(--txt-gray-darker);
    line-height: 1.4;
    word-wrap: break-word; /* Uzun kelimeleri kır */
    overflow-wrap: break-word; /* Modern tarayıcılar için */
    word-break: break-word; /* Uzun metinler için */
    white-space: normal; /* Alt satıra geçebilir */
}

.detail-user-value {
    display: inline-block;
    max-width: 100%;
    white-space: nowrap; /* İsim-soyisim beraber kalsın */
}

.detail-user-empty {
    color: var(--theme-color) !important;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
}

/* detail-row-value ile birlikte kullanıldığında kırmÄ±zÄ± renk */
.detail-row-value.detail-user-empty {
    color: var(--theme-color) !important;
    font-size: 12px !important; /* 13px - 0.5px = 12.5px → 12px */
    white-space: nowrap !important; /* Tek satırda kal */
}


/* DÜZELTİLDİ: Sığıyorsa yan yana, sığmıyorsa alt alta (0px dikey boşlukla) */
.detail-row-inline {
    display: flex !important;
    flex-direction: row !important;    /* Varsayılan olarak yan yana diz */
    flex-wrap: wrap !important;        /* Sığmazsa aşağı kaymasına izin ver */
    align-items: baseline !important;  /* Metin taban çizgilerini hizala */
    
    gap: 0 !important;                 /* Genel boşluğu sıfırla */
    column-gap: 5px !important;        /* Sadece YAN YANA durduklarında araya 5px koy */
    row-gap: 0 !important;             /* Alt satıra indiklerinde araya 0px koy (isteğin bu) */
}

.detail-row-inline .detail-row-header {
    display: flex;
    align-items: baseline;
    gap: 4px;
    flex-shrink: 0;
}

.detail-row-inline .detail-row-label {
    margin-bottom: 0;
    flex-shrink: 0;
    line-height: 1.4;
}

.detail-row-inline .detail-row-value {
    /* Sığıyorsa yan yana kal, sığmıyorsa TÜMÜ alt satıra geç */
    flex-grow: 1;               /* Boş alan varsa doldur */
    flex-shrink: 0;
    flex-basis: max-content;    /* Başlangıç genişliği = metnin kırılmadan doğal genişliği */
    min-width: 0;               /* Taşma koruması (çok uzun tek kelime) */
    max-width: 100%;            /* Alt satıra geçince konteyneri aşmasın */
    overflow-wrap: break-word;  /* Sadece uzun kelimeler için kırılma */
    word-break: normal;         /* Kelimeler arası boşlukta kırılma yok */
    line-height: 1.4;
    margin-top: 0;
}

/* Tarih uyarı renkleri */
.date-warning-orange {
    color: var(--orange-warn) !important;
}

.date-warning-red {
    color: var(--theme-color) !important;
}

/* Taşıt detay: Muayene Bitiş Tarihi – taşıt tipi seçilmedi uyarısı (ünlem + tooltip) */
#vehicle-detail-modal .detail-row-muayene-no-type .detail-muayene-value-wrap {
    position: relative;
    display: inline;
}
#vehicle-detail-modal .detail-row-muayene-no-type .muayene-detail-exclamation {
    color: var(--theme-color);
    font-size: 16px;
    font-weight: 700;
    cursor: help;
    margin-left: 4px;
    user-select: none;
    display: inline;
    visibility: visible;
}
#vehicle-detail-modal .muayene-detail-tooltip-wrap {
    position: absolute;
    left: 0;
    top: 100%;
    margin-top: 4px;
    z-index: 10;
    pointer-events: auto;
}
#vehicle-detail-modal .muayene-detail-tooltip {
    display: none;
    max-width: 280px;
    padding: 8px 10px;
    background: var(--card-bg, #1a1f2e);
    border: 1px solid rgba(var(--theme-color-rgb), 0.4);
    border-radius: 8px;
    font-size: 12px;
    line-height: 1.4;
    color: var(--txt-muted);
    box-shadow: 0 4px 12px var(--shadow-dark);
    white-space: normal;
}
#vehicle-detail-modal .muayene-detail-tooltip.visible {
    display: block !important;
}
/* [hidden] UA kuralını ez: JS ile visible yapıldığında kesin görünsün */
#vehicle-detail-modal .muayene-detail-tooltip.visible[hidden] {
    display: block !important;
}
/* Tooltip görünürlüğü JS ile (mouseover/mouseout + gecikmeli kapatma) */
#vehicle-detail-modal .muayene-detail-tooltip-link {
    background: none;
    border: none;
    padding: 0;
    color: var(--link-blue);
    text-decoration: underline;
    cursor: pointer;
    font-size: inherit;
    font-family: inherit;
}
#vehicle-detail-modal .muayene-detail-tooltip-link:hover {
    color: var(--link-blue-hover);
}

/* === TRAMER KAYITLARI DETAY MODAL STİLLERİ === */
.detail-section {
    margin-top: 20px;
    width: 100%;
    text-align: left;
}

.detail-label {
    font-size: 14px;
    font-weight: 600;
    color: var(--form-label-color);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.detail-item {
    font-size: 13px;
    color: var(--txt-gray);
    padding: 4px 0;
    border-bottom: 1px solid var(--border-ultra);
}

.detail-item:last-of-type {
    border-bottom: none;
}

.detail-total {
    font-size: 14px;
    font-weight: 600;
    color: var(--txt-light);
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--border-faint);
}

/* === SABİT HEADER === */
.tasitlar-modal-overlay .modal-header {
    background: linear-gradient(180deg, rgba(255, 0, 0, 0.30) 0%, rgba(255, 0, 0, 0.22) 25%, rgba(255, 0, 0, 0.16) 50%, rgba(255, 0, 0, 0.10) 75%, transparent 100%);
    padding: 2px 20px;
    height: 60px;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0;
    position: relative;
    border-bottom: none !important;
    border-top-left-radius: var(--modal-radius);
    border-top-right-radius: var(--modal-radius);
    border-top: 0.5px solid var(--border-medium);
}

/* Tarihçe modalı – sekme başlıkları yatayda ortalı (tüm viewport’lar) */
#vehicle-history-modal #history-tabs {
    display: flex;
    align-items: center;
    justify-content: center;
    border-bottom: 1px solid var(--border-ultra);
}
#vehicle-history-modal #history-tabs .history-tab {
    text-align: center;
    justify-content: center;
    color: #ffffff !important;
    padding-bottom: 1px !important; /* Sekme metni ile altındaki yatay çizgi arası 1px */
}

/* Tarihçe: etiketler (tarih, başlık) beyaz; açıklamalar (detay) gri – kontrast artırıldı */
#vehicle-history-modal .history-item-date {
    color: var(--txt-white);
    margin-bottom: 2px !important;
}
#vehicle-history-modal .history-item-date + .history-item-body {
    margin-top: 4px !important;
}
#vehicle-history-modal .history-item-label {
    color: var(--txt-white);
}
#vehicle-history-modal .history-item-body {
    color: var(--txt-muted); /* #999 → #e0e0e0 (kontrast artışı) */
}
#vehicle-history-modal .history-empty-msg {
    color: var(--txt-placeholder);
}
/* Tarihçe: yeni tarihe geçerken aradaki yatay çizgi kırmızı, kontrast için opacity artırıldı */
#vehicle-history-modal .history-item,
.modal-overlay:has(.history-tabs) .history-item {
    border-bottom-color: rgba(var(--theme-color-rgb), 0.6) !important;
}

/* Tarihçe: sekme ile içerik arası 5px azaltma (history-content padding-top style-core'da 15px yapıldı) */
#vehicle-history-modal #history-tabs {
    margin-bottom: 0;
}

/* Tarihçe liste elemanları: üst/alt boşluk 2'şer px azaltma (12px → 10px) */
#vehicle-history-modal .history-item,
.modal-overlay:has(.history-tabs) .history-item {
    padding-top: 10px !important;
    padding-bottom: 10px !important;
    padding-left: 12px !important;
    padding-right: 12px !important;
}

#vehicles-modal .modal-header h2,
#vehicle-detail-modal .modal-header h2,
#vehicle-history-modal .modal-header h2,
.modal-overlay:has(.history-tabs) .modal-header h2 {
    font-size: 17px !important;
    font-weight: 600 !important;
    letter-spacing: 0.05em !important;
    color: var(--txt-light) !important;
    text-shadow: none !important;
    opacity: 1 !important;
    margin: 0 !important;
    text-transform: uppercase;
    position: absolute !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    text-align: center !important;
    width: 100% !important;
    pointer-events: none !important;
    white-space: nowrap;
}

#vehicles-modal .modal-close {
    background: none;
    border: none;
    color: var(--txt-placeholder);
    cursor: pointer;
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 20px;
    padding: 8px;
    z-index: 20;
    display: flex;
    align-items: center;
    justify-content: center;
}
#vehicles-modal .modal-close:hover { color: var(--txt-white); }

/* === DİNAMİK TOOLBAR === */
.vehicles-toolbar {
    height: 40px;
    background: var(--bg);
    border-bottom: none; 
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 16px 0 0; /* Sol ok çerçeveye yaslı (3px sola alındı) */
    position: relative !important;
    z-index: 10;
    flex-shrink: 0;
    overflow: visible !important; /* Şanzıman dropdown kesilmesin (masaüstü + mobil) */
}

.vt-left { display: flex; align-items: center; gap: 8px; flex: 1; min-width: 0; }
.vt-right { 
    display: flex; 
    align-items: center; 
    gap: 12px; 
    justify-content: flex-end;
    position: relative;
    z-index: 25 !important; /* İkonlar arama kutusunun üstünde kalmalı */
}
/* Taşıtlar: şanzıman, arama, arşiv/görünüm ikonları arası 2px */
#vehicles-modal .vt-right {
    gap: 2px !important;
}

/* Toolbar içi geri çubuğu: tam genişlik almasın (style-core .universal-back-bar override) */
.vehicle-detail-toolbar .universal-back-bar,
.vt-left .universal-back-bar {
  width: auto;
  flex: 0 0 auto;
}

/* Taşıt detay toolbar: sol ok + etiket hizası */
#vehicle-detail-modal .vehicle-detail-toolbar .universal-back-bar,
#vehicle-detail-modal .vehicle-detail-toolbar .universal-back-btn {
  display: inline-flex !important;
  align-items: center !important;
  gap: 3px !important;
}
#vehicle-detail-modal .vehicle-detail-toolbar .universal-back-btn i,
#vehicle-detail-modal .vehicle-detail-toolbar .universal-back-btn svg,
#vehicle-detail-modal .vehicle-detail-toolbar .universal-back-btn .back-icon-svg {
  position: relative !important;
  top: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
}
#vehicle-detail-modal .vehicle-detail-toolbar .universal-back-btn .universal-back-label,
#vehicle-detail-modal .vehicle-detail-toolbar .universal-back-btn span {
  font-size: 13px !important;
  line-height: 1 !important;
  margin: 0 !important;
  padding-left: 0 !important;
}
/* BAŞLIK VE OK HİZALAMASI - KESİN KURAL (Taşıtlar Modalı) */
#vehicles-modal .vehicles-toolbar .vt-left .universal-back-bar,
#vehicles-modal .vehicles-toolbar .vt-left .universal-back-btn,
#vehicles-modal .vehicles-toolbar .vt-left .modal-header-back {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  gap: 6px !important;
  height: auto !important;
}
#vehicles-modal .vehicles-toolbar .vt-left .universal-back-btn i,
#vehicles-modal .vehicles-toolbar .vt-left .universal-back-btn svg,
#vehicles-modal .vehicles-toolbar .vt-left .modal-header-back i,
#vehicles-modal .vehicles-toolbar .vt-left .modal-header-back svg {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  position: static !important;
  transform: none !important;
  margin: 0 !important;
  line-height: 1 !important;
}

.vt-icon-btn {
    background: transparent !important;
    border: none !important;
    color: var(--form-label-color);
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.2s, color 0.2s;
    padding: 0;
    transform: scale(1);
}
.vt-icon-btn:hover { 
    color: var(--theme-color) !important; /* Kırmızı renk */
    background: transparent !important; /* Arka plan yok */
    border: none !important; /* Çerçeve yok */
    border-radius: 0 !important;
    transform: scale(1.2); /* İkonlar büyüsün */
}
.vt-icon-btn.active { color: var(--theme-color); }

/* Masaüstü: sol ok ve etiket (3px aşağı: -54 → -51); sütun başlıkları +1px, beyaza yakın renk */
@media (min-width: 641px) {
  /* Bilgi kutuları (şube kartları) hover'da yan çerçeveye değmesin – sol/sağ 2px boşluk */
  #vehicles-modal .modal-body:not(:has(.vehicles-list-scroll)) {
    padding-left: 5px !important;
    padding-right: 5px !important;
  }
  #vehicles-modal .vt-left {
    margin-top: -51px;
  }
  /* Taşıt detay modalı: sol ok + Taşıtlar etiketi 6px yukarı (masaüstü) */
  #vehicle-detail-modal .vehicle-detail-toolbar > div:first-child {
    margin-top: -6px;
  }
  /* Taşıt detay: plaka 1pt büyük, plaka–marka/model arası 3px az (masaüstü) */
  #vehicle-detail-modal .detail-plate {
    font-size: 16px !important;
  }
  #vehicle-detail-modal .detail-plate-row {
    margin-bottom: 2px !important;
  }
  /* Plaka üstten kesilmesin (masaüstü) */
  #vehicle-detail-modal #vehicle-detail-content {
    padding-top: 15px !important;
  }
  #vehicle-detail-modal .vehicle-detail-columns {
    margin-top: 13px !important;
  }
  /* Taşıt detay: ekspertiz şeması sol gridde; büyüklük sol kolona göre (masaüstü) */
  .vehicle-detail-left #detail-boya-container {
    margin-top: 14px !important;
  }
  .vehicle-detail-left #detail-boya-container .kaporta-schema-wrapper {
    max-width: 100% !important;
  }
  /* Tarihçe modal: sol ok ve Taşıt Detayları sabit (scroll ile gitmesin) */
  #vehicle-history-modal .modal-container > div:nth-child(2) {
    margin-top: -8px;
    flex-shrink: 0;
  }
  /* Taşıt listesi: sekme başlıkları 3px yukarı (masaüstü) */
  #vehicles-modal .list-header-row {
    margin-top: -1px !important;
  }
  #vehicles-modal .list-header-row .list-cell {
    font-size: 12px;
    color: var(--form-label-color);
    opacity: 1;
  }
  /* Tüm sütun başlıkları aynı font boyutu (Kullanıcı küçülüyorsa hepsi aynı) */
  #vehicles-modal .list-header-row .list-cell span {
    font-size: clamp(10px, 1.6vw, 13px) !important;
    color: var(--form-label-color) !important;
  }
  #vehicles-modal .list-header-row .list-cell.list-brand .sortable-header span,
  #vehicles-modal .list-header-row .list-cell.list-user span {
    font-size: clamp(10px, 1.6vw, 13px) !important;
    color: var(--form-label-color) !important;
  }
  /* Taşıt listesi: ilk satır dikey hizalama (masaüstü); arka plan alternating’e bırakıldı */
  #vehicles-modal .view-list .list-item:first-child {
    align-items: center !important;
  }
  #vehicles-modal .view-list .list-item:first-child .list-cell {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  /* Şube Değişikliği modal – masaüstü: etiket-input arası 3px, input yüksekliği 106% (100→106) */
  #sube-degisiklik-modal .modal-body .sube-degisiklik-label {
    margin-bottom: 3px !important;
  }
  #sube-degisiklik-modal .modal-body select#sube-select,
  #sube-degisiklik-modal .modal-body select.form-input {
    min-height: 38px !important;
    height: 38px !important;
    box-sizing: border-box;
  }

  /* Olay Ekle modalları – masaüstü: içerik buton satırı genişliği (390px), çerçeve ile 1px boşluk */
  .olay-ekle-modal .modal-body {
    padding-left: 1px !important;
    padding-right: 1px !important;
    padding-top: 16px !important; /* Olay Ekle etiketi ile Tarih etiketi arası 4px azaltıldı (20→16) */
  }
  /* Sadece etiketli form satırları 390px (buton grubunu dahil etme – aşağıda ayrı kural) */
  .olay-ekle-modal .modal-body > div > div:has(label) {
    max-width: 390px;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
  }
  /* Kaydet/Vazgeç: input ile aynı yatay genişlik ve hiza (390px, ortalanmış) */
  .olay-ekle-modal .modal-body .universal-btn-group {
    max-width: 390px !important;
    width: 100% !important;
    margin-left: auto !important;
    margin-right: auto !important;
    box-sizing: border-box !important;
  }
  .olay-ekle-modal .modal-body .universal-btn-save,
  .olay-ekle-modal .modal-body .universal-btn-cancel {
    width: 100% !important;
    max-width: none !important;
    min-width: 0 !important;
  }
  .olay-ekle-modal .modal-body > div > div:has(label) label {
    text-align: left !important;
  }
  .olay-ekle-modal .modal-body .form-input,
  .olay-ekle-modal .modal-body select,
  .olay-ekle-modal .modal-body textarea {
    max-width: 390px !important;
    box-sizing: border-box;
    min-height: 23px !important;
    font-size: 12px !important;
  }
  .olay-ekle-modal .modal-body input.form-input,
  .olay-ekle-modal .modal-body select {
    height: 30px !important;
    min-height: 23px !important;
  }
  /* Etiket+input grupları arası 3px */
  .olay-ekle-modal .modal-body > div:first-of-type {
    gap: 3px !important;
  }
  /* Evet/Hayır, Var/Yok: etiket + radio grubu aynı satırda */
  .olay-ekle-modal .modal-body > div > div:has(.radio-group) {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: 8px !important;
  }
  .olay-ekle-modal .modal-body > div > div:has(.radio-group) label {
    margin-bottom: 0 !important;
    flex-shrink: 0 !important;
  }
  /* Input focus: ince kırmızı çerçeve (kayıt modalı gibi) */
  .olay-ekle-modal .modal-body .form-input:focus,
  .olay-ekle-modal .modal-body select:focus,
  .olay-ekle-modal .modal-body textarea.form-input:focus {
    border: 1px solid var(--theme-color) !important;
    outline: none !important;
    box-shadow: none !important;
  }
  .olay-ekle-modal .universal-back-bar {
    margin-top: -21px !important; /* Sol ok + etiket 3px daha yukarı (-18 → -21) */
  }
}

/* === ARAMA KUTUSU: toolbar satırında, sağdan sola açılır — simgeleri kapatmaz === */
/* Arama: .v-search-container toolbar içinde */

/* === FİLTRE DROPDOWN MENÜSÜ === */
#filter-dropdown {
    display: none;
    position: absolute;
    top: 94px !important; /* Toolbar'ın hemen altı (50px header + 44px toolbar) */
    right: 10px !important;
    z-index: 25;
    background: transparent !important; /* Çerçevesiz, arka plansız */
    border: none !important;
    box-shadow: none !important;
    border-radius: 0;
    padding: 6px 0;
    min-width: 140px;
}

/* Mobil filtreleme dropdown görsel iyileştirme */
#filter-dropdown.open {
    display: flex;
    flex-direction: column;
}
#filter-dropdown .filter-dropdown-btn {
    display: block;
    width: 100%;
    padding: 10px 16px;
    background: transparent;
    border: none;
    color: var(--txt-placeholder) !important;
    font-size: 13px !important;
    text-align: center !important; /* Yatayda ortalanmış */
    cursor: pointer;
    transition: transform 0.2s, color 0.2s !important; /* Hover efekti için */
    font-family: inherit;
}
#filter-dropdown .filter-dropdown-btn:hover {
    transform: scale(1.1); /* Hover efekti */
    color: var(--txt-white) !important;
    background: transparent;
}
#filter-dropdown .filter-dropdown-btn.active {
    color: var(--theme-color);
    font-weight: 600;
}

/* Toolbar içinde açılır arama kutusu (büyüteç tıklanınca açılır; içinde arama + şanzıman) */
.v-search-container {
    width: 0;
    min-width: 0;
    flex-shrink: 1;
    height: 100%;
    background: transparent;
    overflow: hidden;
    transition: width 0.25s cubic-bezier(0.25, 0.8, 0.25, 1);
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 8px;
    padding: 0;
}
.v-search-container.open {
    width: 360px;
    max-width: min(360px, calc(100vw - 120px)); /* Büyüteç+vites+liste ikonları (≈120px) her zaman görünsün, taşma/kesilme olmasın */
}
.v-search-container .v-search-input {
    flex: 1;
    min-width: 0;
}
.v-search-container .v-transmission-filter {
    flex-shrink: 0;
    margin-left: 0;
}
.v-search-input {
    width: 100%;
    background: var(--bg-2);
    border: 1px solid var(--br);
    color: var(--txt-white);
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 14px;
    outline: none;
    transition: border-color 0.2s;
    height: 32px;
    box-sizing: border-box;
}
.v-search-input:focus {
    border-color: var(--theme-color);
}
.v-search-input::placeholder {
    color: var(--txt-gray-darkest);
}

/* Şanzıman filtresi (arama çubuğu içinde, açıldığında görünür) */
.v-transmission-filter {
    height: 32px;
    min-width: 90px;
    margin-left: 0;
    padding: 0 8px;
    font-size: 12px;
    color: var(--txt-gray);
    background: var(--bg-2);
    border: 1px solid var(--border-faint-15);
    border-radius: 6px;
    cursor: pointer;
}
.v-transmission-filter:hover,
.v-transmission-filter:focus {
    border-color: var(--theme-color);
    outline: none;
}
/* Şanzıman simgesi + dropdown (genişleyip daralmayan) */
.v-transmission-wrap {
    position: relative;
    flex-shrink: 0;
}
.v-transmission-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}
.v-transmission-dropdown {
    display: none;
    position: absolute;
    top: 100%;
    right: 0;           /* Sağa hizala: masaüstünde modal dışına taşmasın */
    left: auto;
    margin-top: 4px;
    min-width: 140px;
    max-width: min(140px, calc(100vw - 24px));
    background: var(--bg);
    border: 1px solid var(--border-faint);
    border-radius: 8px;
    box-shadow: 0 6px 20px var(--shadow-dark);
    z-index: 1000;      /* Toolbar ve modal içeriğinin üstünde görünsün */
    padding: 4px 0;
}
.v-transmission-dropdown.open {
    display: block;
}
.v-transmission-option {
    display: block;
    width: 100%;
    padding: 8px 12px;
    text-align: left;
    font-size: 13px;
    color: var(--txt-gray);
    background: none;
    border: none;
    cursor: pointer;
    white-space: nowrap;
}
.v-transmission-option:hover {
    background: var(--border-ultra);
    color: var(--txt-white);
}
.v-transmission-option.active {
    color: var(--theme-color);
}

/* === İÇERİK === */
#vehicles-modal .modal-body {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 18px 3px 12px 3px !important; /* Çerçeve ile içerik arası 3px; üst 18px şube kartı hover kesilmesin */
    box-sizing: border-box !important;
    scrollbar-width: none;
    -ms-overflow-style: none;
}
#vehicles-modal .modal-body::-webkit-scrollbar { display: none; }

/* Liste görünümü: scroll sadece liste gövdesinde (başlık scroll dışında – taşma olmaz) */
#vehicles-modal .modal-body:has(.vehicles-list-scroll) {
    overflow: hidden !important;
    display: flex !important;
    flex-direction: column !important;
    min-height: 0;
    padding-top: 0 !important; /* Sütun başlıkları üzerindeki dikey boşluk 6px azaltıldı (6px→0) */
}
#vehicles-modal-content:has(.vehicles-list-scroll) {
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
    margin-top: 0;
}
.vehicles-list-scroll {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    overflow-x: hidden;
    scrollbar-width: none;
    -ms-overflow-style: none;
}
/* Liste: çerçeve ile 3px boşluk (modal-body padding 3px); hover taşmasın */
#vehicles-modal .vehicles-list-scroll,
#vehicles-modal .tasit-list-container {
    margin-left: 0 !important;
    margin-right: 0 !important;
    width: 100% !important;
}
.vehicles-list-scroll::-webkit-scrollbar { display: none; }

/* === GRID (ŞUBELER) === */
.branch-grid { 
    display: flex;
    flex-wrap: wrap;
    gap: 8px; 
    align-content: start; 
    justify-content: center;
}

.branch-card {
    aspect-ratio: 1 / 1; 
    min-height: 0; 
    width: calc((100% - (4 * 8px)) / 5);
    max-width: calc((100% - (4 * 8px)) / 5);
    flex: 0 0 calc((100% - (4 * 8px)) / 5);
    background: var(--border-faint-02); 
    border: 1px solid var(--border-subtle); 
    border-radius: 8px;
    padding: 3px 4px; /* Dikeyde 2px daha dar (4px → 3px üst/alt) */
    text-align: center;
    will-change: transform; /* Performans optimizasyonu */
    cursor: pointer;
    transition: border-color 0.2s, box-shadow 0.2s;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    box-sizing: border-box;
}
/* Şube kartları - Sadece masaüstünde hover */
@media (hover: hover) and (pointer: fine) {
    .branch-card:hover {
        border-color: var(--border-bright);
        /* Clip-safe hover: yukarı taşıma yok (üstten kesilmesin) */
        transform: scale(1.04);
        transform-origin: center;
        z-index: 5;
    }
    .branch-card:hover .branch-name,
    .branch-card:hover .branch-count {
        transform: none;
    }
}

/* Şube kartları - Mobil active */
@media (hover: none) {
    .branch-card:active {
        border-color: var(--border-bright);
        transform: scale(1.04);
        transform-origin: center;
        z-index: 5;
    }
    .branch-card:active .branch-name,
    .branch-card:active .branch-count {
        transform: none;
    }
}
.branch-card.all-card {
    border-color: var(--border-subtle); 
    background: var(--border-faint-02);
}

/* Tümü kartı için özel hover düzeltmesi */
@media (hover: hover) and (pointer: fine) {
    .branch-card.all-card:hover {
        border-color: var(--border-bright) !important;
        transform: scale(1.06) !important;
        transform-origin: center;
        z-index: 10;
    }
}
@media (hover: none) {
    .branch-card.all-card:active {
        border-color: var(--border-bright) !important;
        transform: scale(1.06) !important;
        transform-origin: center;
        z-index: 10;
    }
}

.branch-name {
    font-size: 13px; /* +1 punto (12→13) */
    font-weight: 700;
    color: var(--txt-light);
    text-transform: uppercase;
    margin-bottom: 2px;
    line-height: 1.1;
    width: 100%;
    white-space: normal;
    word-break: break-word;
    transition: transform 0.2s ease;
    display: block;
    min-height: 2.2em;
    max-height: 2.2em;
    overflow: hidden;
    text-overflow: clip;
}

.branch-count {
    font-size: 12px; /* +1 punto (11→12) */
    color: var(--txt-gray-darker); 
    background: transparent; 
    padding: 0; 
    border-radius: 0;
    transition: transform 0.2s ease;
    font-weight: 500;
}

/* === KART & LİSTE (ARAÇLAR) === */
.view-card {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-content: start;
    justify-content: center;
}

.view-card .card {
    aspect-ratio: 1 / 1;
    min-height: 0;
    width: calc((100% - (4 * 8px)) / 5);
    max-width: calc((100% - (4 * 8px)) / 5);
    flex: 0 0 calc((100% - (4 * 8px)) / 5);
    background: var(--border-faint-02); 
    border: 1px solid var(--border-subtle);
    border-radius: 8px;
    padding: 8px;
    position: relative;
    will-change: transform; /* Performans optimizasyonu */
    cursor: pointer;
    transition: border-color 0.2s, box-shadow 0.2s;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    box-shadow: none;
    box-sizing: border-box;
}

/* Araç kartları - Sadece masaüstünde hover */
@media (hover: hover) and (pointer: fine) {
    .view-card .card:hover {
        border-color: var(--border-bright);
        /* Clip-safe hover: yukarı taşıma yok */
        transform: scale(1.04);
        transform-origin: center;
        z-index: 5;
    }
    .view-card .card:hover .card-plate,
    .view-card .card:hover .card-brand-model,
    .view-card .card:hover .card-third-line {
        transform: none;
    }
}

/* Araç kartları - Mobil active */
@media (hover: none) {
    .view-card .card:active {
        border-color: var(--border-bright);
        transform: scale(1.04);
        transform-origin: center;
        z-index: 5;
    }
    .view-card .card:active .card-plate,
    .view-card .card:active .card-brand-model,
    .view-card .card:active .card-third-line {
        transform: none;
    }
}

.card-plate {
    font-size: 12px;
    font-weight: 700;
    color: var(--txt-light);
    text-align: center;
    margin-bottom: 4px;
    line-height: 1.2;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: transform 0.2s ease;
}

.view-card .card-brand-model {
    font-size: 11px;
    font-weight: 400;
    color: var(--txt-placeholder);
    text-align: center;
    margin-bottom: 4px;
    line-height: 1.3 !important; /* 2 satır için */
    height: 2.6em !important; /* İki satır yüksekliği */
    min-height: 2.6em !important;
    width: 100%;
    white-space: normal !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2;
    -webkit-box-orient: vertical !important;
    overflow: hidden;
    word-break: break-word;
    transition: transform 0.2s ease;
}

.card-third-line {
    font-size: 10px;
    font-weight: 500;
    color: var(--txt-gray-darker);
    text-align: center;
    line-height: 1.2;
    transition: transform 0.2s ease;
    width: 100%;
    white-space: normal;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    word-break: break-word;
}

.view-list .list-item {
    display: grid;
    grid-template-columns: 32px 70px 3.2fr 60px 65px 1.8fr 2fr; /* fallback; JS inline style sütun sırasına göre override eder */
    gap: 4px !important;
    align-items: center;
    padding: 0 2px;
    border-bottom: 1px solid var(--border-faint-08);
    background: var(--bg); /* Modal arka planı ile aynı */
    position: relative;
    z-index: 0;
    cursor: pointer;
    min-height: 32px;
    transition: background 0.2s ease;
    touch-action: manipulation; /* Mobilde 300ms gecikme kalkar, tap daha hızlı tepki verir */
}

.view-list .list-item:hover {
    background: var(--border-ultra);
}
/* Standart: bir satır koyu bir satır açık – okunabilirlik */
.view-list .list-item:nth-child(even) {
    background: var(--border-faint-02);
}

#vehicles-modal .view-list .list-cell,
.view-list .list-cell {
    font-size: 12px !important; /* masaüstü içerik +1 punto (10→11) */
    font-weight: 500 !important;
    color: var(--txt-gray-dark) !important;
    display: flex;
    align-items: center;
    justify-content: center !important;
    line-height: 1.3;
    min-width: 0;
    border-right: 1px solid var(--border-ultra) !important;
    padding: 2px 4px; /* metin–çerçeve arası dikey 2px */
}

/* Son sütun (Şube) için border yok */
.view-list .list-cell.list-branch,
.list-header-row .list-cell.list-branch {
    border-right: none !important;
}

/* Tek satır hücreler için (yıl, plaka, km, tip) */
.view-list .list-cell:not(.list-brand):not(.list-branch):not(.list-user) {
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

/* Liste container: başlığın altında kalsın, kayarken üzerine taşmasın; sütun başlıkları + altındaki öğeler 3px yukarı */
#vehicles-modal .modal-body .view-list {
    position: relative;
    margin-top: -11px;
    z-index: -1; /* Başlığın arkasında kalır (scroll sarmalayıcı yoksa) */
    isolation: isolate;
}
/* Scroll sarmalayıcı içindeyse örtüşme yok, margin sıfır; z-index tıklamaların ulaşması için */
#vehicles-modal .vehicles-list-scroll .view-list {
    margin-top: 0 !important;
    z-index: 0 !important;
}

/* İçerik alanı: başlık ile liste aynı stacking context'te (scroll sarmalayıcı yoksa) */
#vehicles-modal #vehicles-modal-content {
    position: relative;
    isolation: isolate;
}

.list-header-row {
    display: grid;
    grid-template-columns: 32px 70px 3.2fr 60px 65px 1.8fr 2fr; /* fallback; JS inline style sütun sırasına göre override eder */
    gap: 4px !important;
    align-items: center;
    padding: 2px 2px; /* metin–çerçeve arası dikey 2px */
    margin-bottom: 4px;
    border-bottom: 1px solid var(--border-faint-22);
    background: var(--bg) !important;
    width: 100%;
    box-sizing: border-box;
    position: sticky !important; /* Başlık sabit (scroll modal-body'deyken) */
    top: 0 !important;
    z-index: 10 !important;
    isolation: isolate !important;
    transform: translateZ(0);
    box-shadow: 0 2px 0 0 var(--bg);
}
/* Liste scroll sarmalayıcı varken başlık scroll dışında – sticky gerekmez */
#vehicles-modal-content:has(.vehicles-list-scroll) .list-header-row {
    position: static !important;
    top: auto !important;
    z-index: auto !important;
    transform: none;
    box-shadow: none;
    flex-shrink: 0;
}

.list-header-row .list-cell {
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.3px;
    text-transform: uppercase;
    color: var(--txt-gray-dark);
    opacity: 0.8;
    display: flex;
    align-items: center !important;
    justify-content: center !important;
    overflow: visible !important;
    text-overflow: clip;
    white-space: nowrap;
    padding: 2px 4px; /* metin–çerçeve arası dikey 2px */
    min-width: 0;
    border-right: 1px solid var(--border-ultra) !important;
}
/* Sıralama oku her sütunda kendi hücresine göre konumlansın (tüm sütunlarda görünsün) */
.list-header-row .list-cell.sortable-header {
    position: relative !important;
}

.list-header-row .list-cell {
    justify-content: center;
}

.list-header-row .list-cell span {
    font-size: clamp(10px, 1.6vw, 12px) !important;
    font-weight: 700 !important;
    text-transform: uppercase;
    color: var(--txt-placeholder) !important;
}

.list-header-row .list-cell.list-year {
    justify-content: center !important;
    text-align: center !important;
    padding-left: 4px !important;
    padding-right: 4px !important;
    overflow: visible !important;
    white-space: nowrap !important;
}

.list-header-row .list-cell.list-brand {
    text-align: center !important;
    white-space: normal !important;
    word-break: break-word;
    overflow-wrap: break-word;
    line-height: 1.3;
    display: flex !important;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    overflow: hidden !important;
    text-overflow: clip !important;
    padding-left: 4px !important;
    padding-right: 4px !important;
    justify-content: center;
    align-items: center;
    min-width: 0 !important;
}

.list-header-row .list-cell.list-plate {
    justify-content: center !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
}

.list-header-row .list-cell.list-km {
    justify-content: center;
    padding-left: 6px;
    padding-right: 6px;
}

.list-header-row .list-cell.list-type {
    justify-content: center !important;
    text-align: center !important;
    padding-left: 2px !important;
    padding-right: 2px !important;
}

.list-header-row .list-cell.list-user,
.view-list .list-cell.list-user {
    justify-content: center !important;
    text-align: center !important;
    min-width: 0 !important;
}
/* Kullanıcı veri hücresi: sığmazsa en fazla 1.5pt küçülsün, olmazsa ikinci satıra insın */
.view-list .list-cell.list-user {
    font-size: clamp(10px, 1.5vw, 12px) !important;
    white-space: normal !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    overflow: visible !important;
}
/* Kullanıcı sütun başlığı: dar kolonda küçülsün ve gerekirse satır kırılsın */
.list-header-row .list-cell.list-user {
    white-space: normal !important;
    word-break: break-word;
    overflow-wrap: break-word;
}
/* Kullanıcı başlığı da diğerleriyle aynı punto */
.list-header-row .list-cell.list-user span {
    font-size: clamp(10px, 1.6vw, 12px) !important;
}

.list-header-row .list-cell.list-branch {
    text-align: center !important;
    padding-left: 2px !important;
    padding-right: 2px !important;
    white-space: normal !important;
    word-break: break-word;
    overflow-wrap: break-word;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: clip !important;
    justify-content: center;
    align-items: center;
}

.sortable-header {
    cursor: pointer;
    user-select: none;
    transition: opacity 0.2s;
    gap: 4px;
    display: flex !important; /* Flex container */
    align-items: center !important; /* Dikeyde ortala */
    flex-wrap: nowrap !important; /* Sort icon aynı satırda kal */
    justify-content: center !important; /* Başlık metni ortada */
    position: relative; /* Ok ikonu bu hücreye göre sağda konumlansın (tüm sütunlarda görünsün) */
}

.sortable-header:hover {
    opacity: 1;
}

.sortable-header.drag-over {
    border-left: 2px solid var(--green);
    border-right: 2px solid var(--green);
    background: rgba(74, 222, 128, 0.1);
}

.sortable-header span {
    display: inline-block;
    white-space: nowrap;
    flex-shrink: 0;
}

.sort-icon {
    opacity: 0.4;
    transition: opacity 0.2s, color 0.2s;
    flex-shrink: 0;
    display: inline-block !important; /* Inline olarak kal */
    vertical-align: middle !important; /* Dikeyde ortala */
    margin-left: auto !important; /* Icon'u sağa yasla */
    position: absolute;
    right: 0;
}

.sort-icon.active {
    opacity: 1;
    color: var(--txt-light);
}

.sortable-header:hover .sort-icon {
    opacity: 0.7;
}

/* Marka/Model başlığı: dar sütunlarda satır kırma + otomatik font küçülme */
/* NOT: Bu kural genel .sortable-header kuralından SONRA gelmeli (override için) */
.list-header-row .list-cell.list-brand .sortable-header {
    flex-wrap: wrap !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 2px 4px !important;
    max-width: 100% !important;
    min-width: 0 !important;
    width: 100% !important;
}
.list-header-row .list-cell.list-brand .sortable-header span {
    white-space: normal !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    flex-shrink: 1 !important;
    text-align: center !important;
    max-width: 100% !important; /* Icon absolute olduğu için 100% kullanabiliriz */
    min-width: 0 !important;
    display: block !important; /* Block - wrap için daha iyi */
    font-size: clamp(10px, 1.6vw, 12px) !important; /* Diğer başlıklarla aynı punto */
    line-height: 1.15 !important;
    padding: 0 14px 0 0 !important; /* Sağda icon için yer bırak */
}
.list-header-row .list-cell.list-brand .sort-icon {
    flex-shrink: 0 !important;
    position: absolute !important;
    right: 2px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    width: 12px !important;
    height: 12px !important;
}

.view-list .list-cell.list-branch {
    text-align: center !important;
    font-size: inherit !important;
    color: var(--txt-gray-dark);
    padding-left: 2px !important;
    padding-right: 2px !important;
    min-width: 0 !important;
    overflow: hidden !important;
    text-overflow: clip !important;
    white-space: normal !important;
    word-break: break-word;
    overflow-wrap: break-word;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    justify-content: center;
    align-items: center;
}

.view-list .list-cell.list-year {
    color: var(--txt-gray-dark);
    font-weight: inherit !important;
    font-size: inherit !important;
    display: flex;
    justify-content: center !important;
    text-align: center !important;
    align-items: center;
    padding-left: 0 !important;
    padding-right: 0 !important;
    min-width: 0;
}

.view-list .list-cell.list-brand {
    font-size: inherit !important;
    font-weight: inherit !important;
    text-align: center !important;
    white-space: normal !important;
    word-break: break-word;
    overflow-wrap: break-word;
    line-height: 1.3;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: clip !important;
    padding-top: 2px;
    padding-left: 4px !important;
    padding-right: 4px !important;
    min-width: 0 !important;
    justify-content: center;
    align-items: center;
}

.view-list .list-cell.list-plate {
    font-size: inherit !important;
    font-weight: inherit !important;
    color: var(--txt-gray-dark) !important;
    justify-content: center !important;
    text-align: center !important;
    display: flex;
    align-items: center;
    padding-left: 0 !important;
    padding-right: 0 !important;
    min-width: 0;
}

.view-list .list-cell.list-km {
    color: var(--txt-gray-dark);
    font-size: inherit !important;
    justify-content: center;
    padding-left: 6px;
    padding-right: 6px;
    min-width: 0;
}

.view-list .list-cell.list-type {
    color: var(--txt-gray-dark);
    font-size: inherit !important;
    justify-content: center !important;
    text-align: center !important;
    padding-left: 2px !important;
    padding-right: 2px !important;
    min-width: 0;
    text-transform: capitalize;
}

.view-list .list-item:last-child {
    border-bottom: none;
}

.view-list .list-info h4 { margin: 0; font-size: 14px; color: var(--txt-light); }
.view-list .list-info span { font-size: 11px; color: var(--txt-gray-darker); }

.branch-card.unassigned-branch-card {
    border-color: rgba(var(--theme-color-rgb), 0.5) !important;
}

.branch-card.unassigned-branch-card .branch-name,
.branch-card.unassigned-branch-card .branch-count {
    color: var(--theme-color) !important;
}

/* Tahsis Edilmemiş Taşıtlar — tema uyumlu; metinler kırmızı (hem mobil hem masaüstü) */
.view-card .card.unassigned-vehicle-card {
    border-color: var(--border-subtle) !important;
    background: var(--border-faint-02) !important;
}
.view-card .card.unassigned-vehicle-card .card-plate,
.view-card .card.unassigned-vehicle-card .card-brand-model,
.view-card .card.unassigned-vehicle-card .card-third-line {
    color: var(--theme-color) !important;
}

.view-list .list-item.unassigned-vehicle-card {
    border-bottom-color: var(--border-faint-08) !important;
    /* Arka plan alternating’e bırakıldı; vurgu için Şube sütununda kırmızı metin yeterli */
}
/* Sadece Şube sütunundaki "Tahsis Edilmemiş" metni kırmızı; satırın geri kalanı normal */
#vehicles-modal .view-list .list-item.unassigned-vehicle-card .list-cell.list-branch,
.view-list .list-item.unassigned-vehicle-card .list-cell.list-branch {
    color: var(--theme-color) !important;
}

.list-actions {
    display: flex;
    gap: 8px;
    align-items: center;
    opacity: 0;
    transition: opacity 0.2s;
}

.view-list .list-item:hover .list-actions { opacity: 1; }

.list-action-btn {
    background: none;
    border: none;
    color: var(--txt-gray);
    width: auto;
    height: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 16px;
    transition: color 0.2s, background 0.2s, transform 0.2s;
    padding: 4px 8px;
    border-radius: 4px;
}

.list-action-btn.edit:hover { color: var(--amber-edit); background: rgba(221, 164, 16, 0.1); transform: scale(1.1); }
.list-action-btn.delete:hover { color: var(--theme-color); background: rgba(var(--theme-color-rgb), 0.1); transform: scale(1.1); }

/* === ŞUBE ATAMA FORMU === */
.detail-branch-assign {
  margin-top: 24px;
  padding-top: 20px;
  border-top: 1px solid var(--border-ultra);
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}

.assign-toggle {
  font-size: 13px;
  font-weight: 600;
  color: var(--txt-gray-darker);
  text-align: center;
  letter-spacing: 0.5px;
  cursor: pointer;
  padding: 8px 16px;
  transition: color 0.2s;
}

.assign-toggle:hover { color: var(--txt-placeholder); }

.assign-form {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}

.assign-select {
  width: 100%;
  max-width: 350px;
  padding: 8px 12px;
  background: var(--bg-content);
  border: 1px solid var(--border-shiny);
  border-radius: 6px;
  color: var(--txt-gray-darker) !important;
  font-size: 12px;
  font-weight: 600;
  line-height: 1.5;
  cursor: pointer;
  transition: color 0.2s, border-color 0.2s, box-shadow 0.2s;
  box-sizing: border-box;
  overflow: visible;
  text-overflow: clip;
  white-space: nowrap;
  opacity: 1 !important;
  filter: none !important;
  height: auto;
  min-height: 36px;
  display: block;
}

/* Select'te bir şey seçildiğinde rengi değiştir */
.assign-select:not([value=""]),
.assign-select.has-value {
  color: var(--txt-light) !important;
}

.assign-select:focus {
  outline: none;
  border-color: var(--border-light);
  box-shadow: 0 0 8px rgba(var(--theme-color-rgb), 0.3);
}

.assign-select option {
  background: var(--bg);
  color: var(--txt-light); 
  padding: 8px;
  font-size: 12px;
  font-weight: 600;
}
.assign-select option:first-child { 
  color: var(--txt-gray-darker); 
  font-style: normal;
}

/* Şubeye Tahsis Etmek İçin Butonu - Toolbar içinde, çerçevesiz */
.detail-assign-button-frameless {
  background: transparent;
  border: none;
  color: var(--theme-color);
  font-weight: 600;
  font-size: 13px;
  padding: 0;
  cursor: pointer;
  transition: color 0.2s, transform 0.2s;
  letter-spacing: 0.5px;
  animation: blink-red-text 1.5s ease-in-out infinite;
  text-align: center;
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
}

.detail-assign-button-frameless:hover {
  color: var(--theme-color);
  animation: none; /* Hover'da animasyonu durdur */
  transform: scale(1.05);
}

@keyframes blink-red-text {
  0%, 100% {
    opacity: 1;
    color: var(--theme-color);
  }
  50% {
    opacity: 0.5;
    color: rgba(var(--theme-color-rgb), 0.7);
  }
}

/* Detay Modal Toolbar - Büyüteç satırı gibi */
.vehicle-detail-toolbar {
  height: 24px; /* 8px daha azaltıldı (32px → 24px) */
  min-height: 24px; /* Minimum yükseklik */
  background: transparent !important;
  border-bottom: none; 
  display: flex;
  justify-content: space-between; /* Sol ve sağ arasında boşluk */
  align-items: center;
  padding: 0 16px;
  position: relative;
  z-index: 10;
  flex-shrink: 0;
  margin-bottom: 0 !important; /* Alt boşluk yok - plakayı yukarı çekmek için */
}

/* Vehicle Detail Modal Body - SCROLL BURADA OLACAK */
#vehicle-detail-modal .modal-body {
  margin-top: 0 !important;
  padding: 0 !important;
  padding-bottom: 40px !important; /* Chrome fix: Logoların kesilmemesi için artırıldı */
  overflow-y: auto !important;
  overflow-x: visible !important; /* Plaka taşabilir */
  flex: 1;
  display: flex;
  flex-direction: column;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  -ms-overflow-style: none;
}
#vehicle-detail-modal .modal-body::-webkit-scrollbar { display: none; }

.vehicle-detail-toolbar .toolbar-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Olay Ekle butonu - Marka/model satırında solda */
.detail-brand-year-row .history-add-event-btn {
    width: auto;
    padding: 5px 8px 5px 0 !important;
    background: transparent !important;
    border: none !important;
    color: var(--theme-color);
    border-radius: 0;
    cursor: pointer;
    font-weight: 600;
    font-size: 15px;
    display: flex !important;
    align-items: center !important; /* İkon ve metin kendi içinde hizalı */
    gap: 0;
    justify-content: flex-start !important;
    flex-shrink: 0;
    position: relative;
    z-index: 2;
    text-align: left !important;
    margin: 0 !important; /* Hizayı bozan dış boşlukları kaldır */
    margin-left: 0 !important;
    align-self: center;
    line-height: 1 !important; /* Font yüksekliğinden kaynaklı kaymaları önler */
}

.detail-brand-year-row .history-add-event-btn svg {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
}

.detail-brand-year-row .history-add-event-btn:hover {
    color: var(--theme-color); /* Renk değişmesin, aynı kırmÄ±zÄ± kalacak */
    transform: scale(1.08); /* Görsel olarak büyüt (sayfa kıpırdamasın diye transform kullanıldı) */
}

/* Tarihçe butonu - Marka/model satırında sağda (Olay Ekle ile aynı satır, aynı dikey padding) */
.detail-brand-year-row .history-btn-minimal {
    position: relative;
    display: flex !important;
    align-items: center !important; /* İkon ve metin kendi içinde hizalı */
    gap: 4px;
    color: var(--txt-gray);
    font-size: 15px;
    padding: 5px 8px 5px 8px; /* Olay Ekle ile aynı dikey 5px – tek satır hizası */
    flex-shrink: 0;
    z-index: 2;
    transition: color 0.2s ease, font-size 0.2s ease;
    margin: 0 !important; /* Hizayı bozan dış boşlukları kaldır */
    line-height: 1 !important; /* Font yüksekliğinden kaynaklı kaymaları önler */
}

.detail-brand-year-row .history-btn-minimal:hover {
    color: var(--txt-white);
    font-size: 16px; /* Hover'da metin de büyüsün (15px → 16px) */
}

.detail-brand-year-row .history-btn-minimal svg {
    width: 16px;
    height: 14px; /* Dikeyde küçültüldü (16px → 14px) */
    flex-shrink: 0;
}
.detail-brand-year-row .history-btn-minimal:hover svg {
    transform: scale(1.08);
    transform-origin: center center;
}

/* Event Menu List Hover Efektleri - Sadece Metin Büyüyecek */
#event-menu-list {
  display: flex !important;
  flex-direction: column !important;
  gap: 8px !important;
  align-items: center !important; /* Masaüstünde yatayda ortalı */
  width: 100%; /* Container genişliği */
}

#event-menu-list button {
  transition: outline 0.2s ease, font-weight 0.2s ease;
  outline: 2px solid transparent;
  outline-offset: -2px;
  text-align: center !important; /* Buton metni ortalı - JavaScript'teki text-align: left'i override eder */
  width: calc(100% - 20px) !important; /* Sağ ve soldan 10px daralt (toplam 20px) - Tüm butonlar aynı genişlikte */
  max-width: calc(100% - 20px) !important; /* Maksimum genişlik container'a göre - 20px daralt */
  box-sizing: border-box !important; /* Padding ve border genişliğe dahil */
  min-width: 0 !important; /* Flexbox minimum genişlik sorunlarını önler */
  white-space: nowrap !important; /* Metin tek satırda kalsın */
  margin: 0 auto !important; /* Yatayda ortala (sağ ve soldan eşit boşluk) */
}

#event-menu-list button:hover {
  outline-color: rgba(255, 255, 255, 0.4);
  font-weight: 700 !important; /* 14px → 15px */
}

/* Kaza Modalı - Kaporta Şeması Yatayda Ortalı; masaüstünde şema büyük (soldaki alanı da kullan) */
  #kaza-kaporta-container {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    width: 100% !important;
  }
  
  #kaza-kaporta-container > div {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 0 !important;
  }

  /* Masaüstü: şema oranlı büyütme (~1.31x) – yatay alan kullanılsın */
  @media (min-width: 641px) {
    #kaza-ekle-modal #kaza-kaporta-container > div,
    #kaza-guncelle-modal #kaza-kaporta-container > div {
      max-height: 190px !important;
    }
    #kaza-ekle-modal #kaza-kaporta-container svg,
    #kaza-guncelle-modal #kaza-kaporta-container svg {
      width: 220px !important;
      height: 147px !important;
    }
  }
  
  /* Olay Ekle (14 modal): Var/Yok, Evet/Hayır – pasif açık gri, hover/seçili renkli */
  .olay-ekle-modal .radio-btn {
    background: rgba(255, 255, 255, 0.06) !important; /* Pasifken hafif gri zemin */
    border: 1px solid rgba(255, 255, 255, 0.25) !important; /* Parlak beyaz değil, açık gri çerçeve */
    color: #9ca3af !important; /* Pasifken açık gri metin (parlak beyaz değil) */
    border-radius: 4px !important;
    padding: 9px 28px !important; /* 4+5 dikey, 14*2 yatay */
    font-size: 14px !important;
    font-weight: 400 !important;
    cursor: pointer !important;
    transition: background 0.15s ease, border-color 0.15s ease, color 0.15s ease !important;
  }
  .olay-ekle-modal .radio-btn.hover-green:hover,
  .olay-ekle-modal .radio-btn.active.green {
    background: rgba(74, 222, 128, 0.18) !important;
    border-color: rgba(74, 222, 128, 0.85) !important;
    color: #4ade80 !important;
  }
  .olay-ekle-modal .radio-btn.hover-red:hover,
  .olay-ekle-modal .radio-btn.active:not(.green) {
    background: rgba(var(--theme-color-rgb), 0.20) !important;
    border-color: var(--theme-color) !important;
    color: var(--theme-color) !important;
  }
  .olay-ekle-modal .radio-group {
    justify-content: flex-start !important;
  }
  
  .detail-row-label { font-size: 14px; color: var(--form-label-color); }
  .detail-row-value { font-size: 15px; }

  /* Şube Atama Mobil */
  .assign-toggle { font-size: 13px; }
  .assign-select { font-size: 13px; }
/* Tarihçe – Şube/Kullanıcı geçmişi: açıklamalar normal ve daha az parlak */
#vehicle-history-modal .history-item-sube .history-date {
    font-weight: 600;
    color: var(--txt-muted);
}
#vehicle-history-modal .history-item-sube .history-desc {
    font-weight: 400 !important;
    color: var(--txt-placeholder) !important;
}

/* =========================================
   MOBİL GÖRÜNÜM - TÜM MEDIA QUERY'LER BİRLEŞTİRİLDİ
   ========================================= */
@media (max-width: 640px) {
  /* Şanzıman + arama (önceki bloktan taşındı) */
  .v-transmission-filter {
    min-width: 72px;
    font-size: 11px;
    margin-left: 4px;
    padding: 0 6px;
  }
  .v-search-container.open {
    width: min(360px, calc(100vw - 120px)) !important;
    max-width: min(360px, calc(100vw - 120px)) !important;
  }
  /* ✨ MOBİL KONTRAST ARTIRMA ✨ */
  .detail-row-label {
    color: var(--form-label-color) !important;
  }
  
  .detail-row-value {
    color: rgba(255, 255, 255, 0.85) !important; /* Gri açık ton (soluk kalmasın) */
  }
  
  .detail-plate {
    color: var(--txt-white) !important;
  }
  
  .detail-brand-year {
    color: rgba(255, 255, 255, 0.9) !important; /* Marka/yıl daha parlak */
  }
  
  /* Sol ok + etiket sol çerçeveye 3px (mobil); sağda arama/şanzıman taşmasın */
  .vehicles-toolbar {
    padding-left: 0 !important; /* Sol ok çerçeveye yaslı */
    padding-right: 6px !important;
  }
  #vehicles-modal .vt-right {
    gap: 2px !important;
    flex-shrink: 1;
    min-width: 0 !important;
    overflow: visible !important; /* Şanzıman dropdown mobilde kesilmesin, görünsün */
  }
  /* Taşıtlar toolbar: arama + şanzıman + diğer ikonlar sığsın */
  #vehicles-modal .vt-right .vt-icon-btn,
  #vehicles-modal .vt-right .v-transmission-btn {
    width: 34px !important;
    height: 34px !important;
  }
  #vehicles-modal .vt-right .vt-icon-btn svg,
  #vehicles-modal .vt-right .v-transmission-btn svg {
    width: 18px !important;
    height: 18px !important;
  }
  /* Şanzıman dropdown mobil: sağa hizalı (zaten base'de right:0), görünür olsun */
  .v-transmission-dropdown {
    max-width: min(140px, calc(100vw - 20px));
    z-index: 1000;
  }
  /* Taşıt detay toolbar sol 4px */
  #vehicle-detail-modal .vehicle-detail-toolbar {
    padding-left: 1px !important; /* Sol ok 3px sola (4→1) */
  }
  /* Taşıt detay: Muayene Bitiş Tarihi tooltip – mobilde sayfa dışına taşmasın */
  #vehicle-detail-modal .muayene-detail-tooltip-wrap {
    right: 0;
    left: auto;
    max-width: min(280px, 90vw);
  }
  #vehicle-detail-modal .muayene-detail-tooltip {
    max-width: min(280px, 90vw);
    box-sizing: border-box;
  }
  /* --- EVRENSEL GERİ BUTONU MOBİL (touch target) --- */
  .vehicle-detail-toolbar .universal-back-btn,
  .olay-ekle-modal .universal-back-btn {
    padding: 10px !important;
    min-width: 44px !important;
    min-height: 44px !important;
  }
  .vehicle-detail-toolbar .back-icon-svg,
  .olay-ekle-modal .back-icon-svg {
    width: 28px !important;
    height: 28px !important;
  }
  /* Mobil: sol ok ile etiket (Taşıtlar) dikeyde hizalı */
  #vehicle-detail-modal .vehicle-detail-toolbar .universal-back-bar {
    display: inline-flex !important;
    align-items: center !important;
    gap: 4px !important;
    padding-left: 0 !important;
  }
  #vehicle-detail-modal .vehicle-detail-toolbar .universal-back-btn {
    display: inline-flex !important;
    align-items: center !important;
    gap: 4px !important;
    padding-left: 0 !important;
  }
  #vehicle-detail-modal .vehicle-detail-toolbar .universal-back-btn i,
  #vehicle-detail-modal .vehicle-detail-toolbar .universal-back-btn svg,
  #vehicle-detail-modal .vehicle-detail-toolbar .universal-back-btn .back-icon-svg {
    position: relative !important;
    top: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  #vehicle-detail-modal .vehicle-detail-toolbar .universal-back-btn .universal-back-label,
  #vehicle-detail-modal .vehicle-detail-toolbar .universal-back-btn span {
    font-size: 13px !important;
    line-height: 1 !important;
    margin: 0 !important;
  }
  .vt-icon-btn {
    width: 38px !important;
    height: 38px !important;
  }
  .vt-icon-btn svg {
    width: 22px !important;
    height: 22px !important;
  }
  .olay-ekle-modal .universal-back-bar {
    margin-top: -21px !important; /* Mobil: sol ok + etiket 3px daha yukarı */
  }
  .olay-ekle-modal .universal-back-bar .universal-back-label {
    font-size: 17.5px !important;
    margin-top: 0 !important;
  }

  /* Yapılan İşlemler: 2 satır varsayılan, içerik uzadıkça aşağı açılsın */
  #bakim-islemler.olay-textarea-expand,
  .olay-ekle-modal textarea.olay-textarea-expand {
    min-height: 3em !important; /* ~2 satır yüksekliği */
    height: auto !important;
    resize: none !important;
    overflow-y: auto !important;
    line-height: 1.4 !important;
    box-sizing: border-box !important;
  }

  .tasitlar-modal-overlay .modal-container {
    background: var(--modal-bg) !important;
    overflow: hidden !important;
    overflow-x: hidden !important; /* Yatay kayma engelle */
    touch-action: pan-y !important;
    overscroll-behavior: none !important;
    overscroll-behavior-x: none !important;
  }

  /* Olay Ekle modalları mobil: style-core ile uyumlu (overlay doldur, footer boşluk overlay'da) */
  .olay-ekle-modal .modal-container {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    height: 100% !important;
    max-height: 100% !important;
  }

  .tasitlar-modal-overlay .modal-header h2 {
    font-size: 19px !important; /* 18px + 1 punto (sadece mobil) */
    color: var(--txt-white) !important;
    text-shadow: none !important;
  }

  #filter-dropdown {
    background: var(--bg) !important;
    border: 1px solid var(--border-light) !important;
    border-radius: 8px;
    padding: 8px !important;
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.45);
    backdrop-filter: blur(6px);
  }

  /* --- TAŞIT DETAY MODAL --- */
  /* Taşıt detay toolbar kesilme sorunu; yatay boşluk aşağıdaki DETAY MODAL SCROLL & PADDING bloğunda 3px */
  #vehicle-detail-content {
    padding-top: 20px !important; /* 14px → 20px */
  }
  .detail-plate-row {
    margin-top: -16px !important; /* Plaka 3px yukarı (mobil) */
  }
  
  /* Taşıt detay: layout base + container query ile; mobilde de yatay alan varsa yan yana */
  .detail-row-inline .detail-row-value {
    margin-top: 0 !important;
  }
  .detail-row-inline .detail-row-label {
    flex-shrink: 0 !important;
    white-space: nowrap !important;
  }
  
  .detail-row-label,
  .detail-row-inline .detail-row-label {
    font-size: 15px !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    flex-shrink: 0 !important; /* Gereksiz wrap önlenir */
    white-space: normal !important;
    word-break: break-word !important;
  }
  
  /* Mobil taşıt detay: tüm metinler +1pt tek blokta */
  .detail-row-value {
    font-size: 16px !important; /* +1pt (base 14/15) */
    color: var(--txt-gray-darker) !important; /* Gri renk */
  }
  .detail-row-value.detail-user-empty {
    color: var(--theme-color) !important;
    font-size: 17px !important; /* +1pt (value 16px) */
    white-space: nowrap !important; /* Mobilde tek satırda kal */
  }
  .detail-plate {
    font-size: 22px !important; /* +1pt tutarlı (tek kaynak) */
  }
  .detail-brand-year {
    font-size: 19px !important; /* +1pt (base 15→16 civarı mobil) */
  }
  .detail-label {
    font-size: 15px !important; /* +1pt (base 14px) */
  }
  .detail-item {
    font-size: 14px !important; /* +1pt (base 13px) */
  }
  .detail-total {
    font-size: 15px !important; /* +1pt (base 14px) */
  }
  
  /* Mobil: çerçeve ile içerik arası 3px */
  #vehicles-modal .modal-body {
    padding: 10px 3px 40px 3px !important;
    overflow-x: hidden !important; /* Sağa sola kaymayı engelle */
    touch-action: pan-y !important; /* Sadece dikey kaydırma */
    overscroll-behavior-x: none !important; /* Yatay overscroll'u engelle */
    isolation: isolate !important;
  }
  #vehicles-modal .modal-body .view-list {
    isolation: isolate !important;
    position: relative !important;
    width: 100% !important;
    min-width: 0 !important; /* Grid satırların viewport içinde kalıp wrap etmesi için */
    max-width: 100% !important;
  }
  
  /* --- BRANCH GRID & CARDS --- */
  .branch-grid { gap: 2px; }
  .branch-card { 
    padding: 3px; 
    width: clamp(90px, 26vw, 104px);
    max-width: clamp(90px, 26vw, 104px);
    flex: 0 0 clamp(90px, 26vw, 104px);
    aspect-ratio: 1 / 1;
  }
  .branch-name { font-size: 15px; } /* +1 punto daha (sadece mobil) */
  .branch-count { font-size: 15px; } /* +1 punto daha (sadece mobil) */
  
  .view-card { 
    gap: 4px; 
    padding: 0; 
    justify-content: space-evenly; /* Kartları eşit dağıt */
  }
  .view-card .card { 
    padding: 3px; 
    width: clamp(90px, 26vw, 104px);
    max-width: clamp(90px, 26vw, 104px);
    flex: 0 0 clamp(90px, 26vw, 104px);
    border: 1.2px solid rgba(255, 255, 255, 0.25); /* Daha kalın ve daha görünür çerçeve */
  }
  
  .card-plate { font-size: 18px; } /* +1 punto daha (sadece mobil) */
  .card-brand-model { font-size: 16px; font-weight: 400; color: var(--form-label-color); } /* +1 punto daha (sadece mobil) */
  .card-third-line { font-size: 14px; } /* +1 punto daha (sadece mobil) */

  /* --- TARİH INPUTLARI (Olay Ekle 14 modal) - gg.aa.yyyy kutudan taşmasın --- */
  .olay-ekle-modal .modal-body .olay-tarih-input,
  .olay-ekle-modal .modal-body input[type="date"].form-input {
    width: 100% !important;
    max-width: 165px !important;
    min-width: min(140px, 100%) !important;
    overflow: hidden !important;
    font-size: 11px !important;
    padding: 5px 28px 5px 10px !important;
    text-align: left !important;
    box-sizing: border-box !important;
  }
  .olay-ekle-modal .modal-body .olay-tarih-input::-webkit-datetime-edit,
  .olay-ekle-modal .modal-body input[type="date"].form-input::-webkit-datetime-edit {
    font-size: 11px !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
  }
  .olay-ekle-modal .modal-body .olay-tarih-input::-webkit-datetime-edit-fields-wrapper,
  .olay-ekle-modal .modal-body input[type="date"].form-input::-webkit-datetime-edit-fields-wrapper {
    padding: 0 !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
  }
  /* Tarih input'un doğrudan parent'ı – taşan içeriği kırp */
  .olay-ekle-modal .modal-body div:has(> .olay-tarih-input),
  .olay-ekle-modal .modal-body div:has(> input[type="date"]) {
    overflow: hidden !important;
    min-width: 0 !important;
  }
  /* Olay Ekle: tarih input gg.aa.yyyy sola kaçmasın */
  .olay-ekle-modal .modal-body input[type="date"].form-input,
  .olay-ekle-modal .modal-body .olay-tarih-input {
    padding-left: 12px !important;
    padding-right: 28px !important;
    text-align: left !important;
    width: 100% !important;
    max-width: 100% !important;
  }
  .olay-ekle-modal .modal-body input[type="date"].form-input::-webkit-datetime-edit-fields-wrapper,
  .olay-ekle-modal .modal-body .olay-tarih-input::-webkit-datetime-edit-fields-wrapper {
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  /* --- OLAY EKLE MODALLARI - TÜM METİNLER +2px --- */
  .olay-ekle-modal .modal-header h2 {
    font-size: 19px !important; /* +2px */
  }

  .olay-ekle-modal .modal-body {
    padding-top: 16px !important; /* Olay Ekle – Tarih arası 4px az (mobil) */
    padding-bottom: 40px !important; /* Chrome fix: Logoların kesilmemesi */
    font-size: 16px !important; /* +2px */
  }

  .olay-ekle-modal .modal-body label {
    font-size: 18.5px !important;
    text-align: left !important;
  }

  .olay-ekle-modal .modal-body .form-input,
  .olay-ekle-modal .modal-body select,
  .olay-ekle-modal .modal-body textarea {
    font-size: 17px !important; /* 16px + 1 punto */
  }

  .olay-ekle-modal .modal-body button {
    font-size: 17px !important; /* 16px + 1 punto */
  }

  /* Olay Ekle: uzun buton metni taşmasın – satır kırılır, gerekirse font küçülür */
  #event-menu-modal .modal-body button {
    white-space: normal !important;
    overflow-wrap: break-word !important;
    word-break: break-word !important;
    text-align: left !important;
    line-height: 1.25 !important;
    font-size: clamp(11px, 2.8vw, 17px) !important;
  }

  /* Mobil kullanıcı atama input yüksekliği +3px */
  #kullanici-atama-modal .form-input {
    height: 31px !important;
  }
  /* Şube Değişikliği şube input/select dikey +4px */
  #sube-degisiklik-modal .modal-body select,
  #sube-degisiklik-modal .modal-body .form-input {
    min-height: 32px !important;
    height: 32px !important;
  }

  /* Olay Ekle (14 modal): ortak header/h2 – uzun başlıklar satır kırar */
  .olay-ekle-modal .modal-header h2 {
    width: 100% !important;
    text-align: center !important;
    white-space: normal !important;
    line-height: 1.2 !important;
    padding: 0 30px !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
  }
  /* Olay ekle modalları sol ok/kapat ikonu 20px→24px */
  .olay-ekle-modal .modal-close svg {
    width: 24px !important;
    height: 24px !important;
  }

  /* --- TARİHÇE MODAL --- */
  /* Mobil tarihçe sekmeleri - ortalı +2px */
  #vehicle-history-modal #history-tabs {
    align-items: center !important;
  }
  #vehicle-history-modal #history-tabs .history-tab {
    text-align: center !important;
    justify-content: center !important;
    font-size: 14px !important; /* +2px */
  }
  #vehicle-history-modal #history-content {
    font-size: 16px !important; /* +2px */
  }
  
  /* Mobil Tarihçe Metinleri Büyütme (Fix for inline JS styles) */
  #vehicle-history-modal .history-item div {
    font-size: 15px !important; /* 13px -> 15px (+1.5pt approx) */
    line-height: 1.5 !important;
  }
  /* Tarih/Başlık kısmını bir tık daha belirgin yap */
  #vehicle-history-modal .history-item div:first-child {
    font-size: 16px !important;
    margin-bottom: 6px !important;
  }
  /* Tarihçe bölümler arası dikey boşluk 4px toplam (1.5+1+1.5, mobil) */
  #vehicle-history-modal .history-item {
    padding: 1.5px 12px !important;
  }
  
  /* --- LİSTE GÖRÜNÜMÜ MOBİL - MASAÜSTÜNE GÖRE UYARLANDI --- */
  /* Satır Yapısı - Masaüstü referans alınarak uyarlandı */
  .view-list .list-item {
    display: grid !important;
    /* Masaüstü: 32px 70px 3.2fr 60px 65px 1.8fr 2fr */
    /* Mobil: Şube 3px dar, Kullanıcı 3px geniş; metin çerçeveye 1px */
    grid-template-columns: 32px 70px 2.4fr 60px 1.75fr 2.05fr; /* fallback; JS inline style override eder */
    gap: 4px !important; /* Masaüstü ile aynı */
    padding: 4px 1px 4px 2px !important; /* Sol çerçeveye 1px daha boşluk */
    min-height: 32px !important;
    min-width: 0 !important; /* İçerik sığmayınca ikinci satıra düşsün, yatay taşma olmasın */
    width: 100% !important;
    align-items: center !important;
    border-bottom: 1px solid var(--border-faint-08) !important;
    background: var(--bg) !important; /* Modal arka planı ile aynı */
    position: relative !important;
    /* Liste görünür; başlık z-index: 1000 ile üstte */
    cursor: pointer !important;
    transition: background 0.2s ease !important;
  }
  .view-list .list-item:nth-child(even) {
    background: var(--border-faint-02) !important; /* Alternating: bir koyu bir açık */
  }

  .view-list .list-item:hover {
    background: var(--border-ultra) !important;
  }

  /* Başlık Satırı - Mobil: +1pt (JS --list-header-font-size); dikey ortalanmış */
  .list-header-row {
    --list-header-font-size: 15px; /* JS ile güncellenir; min 13.5px (15 - 1.5pt) */
    display: grid !important;
    grid-template-columns: 32px 70px 2.4fr 60px 1.75fr 2.05fr; /* Şube 3px dar, Kullanıcı 3px geniş */
    gap: 4px !important;
    align-items: center !important;
    padding: 2px 4px !important; /* başlık metin üst/alt 2px */
    margin-bottom: 4px !important;
    border-bottom: 1px solid var(--border-faint-22) !important;
    background: var(--bg) !important;
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
    position: sticky !important;
    top: 0 !important;
    z-index: 9999 !important;
    isolation: isolate !important;
    transform: translateZ(0);
    box-shadow: 0 2px 0 0 var(--bg) !important;
    width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
  }

  /* Liste başlıkları - font-size JS değişkeninden (tümü aynı), +1pt; renk #ffffff */
  .list-header-row .list-cell,
  .list-header-row .list-cell span {
    color: var(--form-label-color) !important; /* Kayıt modalı etiketleri ile aynı beyaz */
  }
  .list-header-row .list-cell {
    font-size: var(--list-header-font-size, 15px) !important;
    padding-left: 1px !important;
    padding-right: 1px !important;
  }
  /* İçerik hücreleri: +1.5pt (16→17.5); metin–çerçeve yatay 1px, dikey 2px */
  .view-list .list-cell {
    font-size: 17.5px !important;
    font-weight: 500 !important;
    color: var(--txt-muted) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    line-height: 1.4 !important;
    min-width: 0 !important;
    max-width: 100% !important;
    border-right: 1px solid var(--border-ultra) !important;
    padding-left: 1px !important;
    padding-right: 1px !important;
    padding-top: 2px !important;
    padding-bottom: 2px !important;
    overflow: hidden !important;
  }

  /* Marka/Model - en fazla 2 satır, 3. satır yok; 1 punto küçük (17.5→16.5px) */
  .view-list .list-cell.list-brand {
    font-size: 16.5px !important;
    font-weight: inherit !important;
    text-align: center !important;
    white-space: normal !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    line-height: 1.4 !important;
    display: -webkit-box !important;
    -webkit-box-orient: vertical !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2 !important;
    overflow: hidden !important;
    text-overflow: clip !important;
    padding: 2px 1px !important;
    min-width: 0 !important;
  }

  /* Plaka - yatay 1px, dikey 2px */
  .view-list .list-cell.list-plate {
    font-size: inherit !important; /* 16px - mobil +1pt */
    font-weight: inherit !important; /* 500 - masaüstü ile aynı */
    color: var(--txt-white) !important; /* Masaüstü ile aynı */
    justify-content: center !important; /* Masaüstü ile aynı */
    text-align: center !important; /* Masaüstü ile aynı */
    display: flex !important;
    align-items: center !important;
    padding: 2px 1px !important;
    min-width: 0 !important;
    white-space: nowrap !important;
  }

  /* Yılı - yatay 1px, dikey 2px */
  .view-list .list-cell.list-year {
    color: var(--txt-light) !important;
    font-weight: inherit !important;
    font-size: inherit !important;
    display: flex !important;
    justify-content: center !important; /* Masaüstü ile aynı */
    text-align: center !important; /* Masaüstü ile aynı */
    align-items: center !important;
    padding: 2px 1px !important;
    min-width: 0 !important;
  }

  /* KM - yatay 1px, dikey 2px */
  .view-list .list-cell.list-km {
    color: var(--txt-gray-dark) !important;
    font-size: inherit !important; /* 16px - mobil +1pt */
    justify-content: center !important; /* Masaüstü ile aynı */
    padding: 2px 1px !important;
    min-width: 0 !important;
  }

  /* Kullanıcı sütunu - en fazla 2 satır, çerçeveye 1px; 1pt'den fazla küçülme yok */
  .list-header-row .list-cell.list-user {
    display: flex !important;
    justify-content: center !important;
    text-align: center !important;
    align-items: center !important;
  }
  .view-list .list-cell.list-user {
    display: flex !important;
    flex-direction: column !important;
    justify-content: center !important;
    text-align: center !important;
    white-space: normal !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    overflow: hidden !important;
    font-size: 16px !important; /* Sabit; 1pt'den fazla küçülme yok, gerekirse alt satıra iner */
  }
  .view-list .list-cell.list-user .user-name-line1,
  .view-list .list-cell.list-user .user-name-line2 {
    display: block !important;
    line-height: 1.3 !important;
  }

  /* Tek satır hücreler - list-brand, list-branch, list-user wrap edebilir */
  .view-list .list-cell:not(.list-brand):not(.list-branch):not(.list-user) {
    white-space: nowrap !important; /* Masaüstü ile aynı */
    overflow: hidden !important; /* Masaüstü ile aynı */
    text-overflow: ellipsis !important; /* Masaüstü ile aynı */
  }

  /* Mobil/tablet (≤768px): Taşıt Tipi sütununu gizle (JS de render etmiyor; bu yedek) */
  .view-list .list-cell.list-type {
    display: none !important;
  }
  .list-header-row .list-cell.list-type {
    display: none !important;
  }
  
  /* Şube sütunu - en fazla 2 satır; yatay 3px sol 1px sağ, dikey 2px */
  .view-list .list-cell.list-branch {
    display: -webkit-box !important;
    -webkit-box-orient: vertical !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2 !important;
    font-size: inherit !important;
    font-weight: inherit !important;
    color: inherit !important;
    justify-content: center !important;
    text-align: center !important;
    white-space: normal !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    overflow: hidden !important;
    padding: 2px 1px 2px 3px !important;
  }
  #vehicles-modal .view-list .list-item.unassigned-vehicle-card .list-cell.list-branch,
  .view-list .list-item.unassigned-vehicle-card .list-cell.list-branch {
    color: var(--theme-color) !important;
  }
  .list-header-row .list-cell.list-branch {
    display: flex !important;
    padding-left: 3px !important; /* şube yatay boşluk az (3px); 3px kullanıcıya verildi */
  }
  .list-header-row .list-cell.list-user {
    padding-right: 3px !important; /* çerçeveye 1px yakın, tutarlı */
  }
  .view-list .list-cell.list-user {
    padding: 2px 1px !important; /* dikey 2px; yatay 1px (metin çerçeveye 1px) */
  }

  /* Başlık Hücreleri - font-size tek kaynak; üst hizalı; ikinci satıra geçebilir */
  .list-header-row .list-cell {
    font-size: var(--list-header-font-size, 15px) !important;
    font-weight: 600 !important;
    letter-spacing: 0.3px !important;
    text-transform: uppercase !important;
    color: var(--form-label-color) !important; /* Kayıt etiketleri ile aynı beyaz */
    opacity: 1 !important;
    display: flex !important;
    align-items: flex-start !important;
    overflow: visible !important;
    text-overflow: clip !important;
    white-space: normal !important;
    word-break: break-word !important;
    min-width: 0 !important;
    border-right: 1px solid var(--border-ultra) !important;
    justify-content: center !important;
  }

  /* Başlık metinleri - tümü aynı punto; ikinci satıra geçebilir */
  .list-header-row .list-cell span {
    font-size: var(--list-header-font-size, 15px) !important;
    font-weight: 700 !important;
    text-transform: uppercase !important;
    color: var(--form-label-color) !important; /* Kayıt etiketleri ile aynı beyaz */
    white-space: normal !important;
    word-break: break-word !important;
  }
  /* Marka/Model ve Kullanıcı başlıkları da aynı punto (base clamp mobilde ezilsin) */
  .list-header-row .list-cell.list-brand .sortable-header span,
  .list-header-row .list-cell.list-user span {
    font-size: var(--list-header-font-size, 15px) !important;
  }

  /* Sıralanabilir başlık: üst hizalı, metin ikinci satıra geçebilir (ilk satır hep aynı hizada) */
  .list-header-row .sortable-header {
    align-items: flex-start !important;
    flex-wrap: wrap !important;
    justify-content: center !important;
  }
  .list-header-row .sortable-header span {
    white-space: normal !important;
    word-break: break-word !important;
    flex-shrink: 1 !important;
  }

  .list-header-row .list-cell.list-year {
    justify-content: center !important; /* Masaüstü ile aynı */
    text-align: center !important; /* Masaüstü ile aynı */
    padding: 1px !important;
    overflow: visible !important;
    white-space: nowrap !important;
  }

  .list-header-row .list-cell.list-brand {
    text-align: center !important; /* Masaüstü ile aynı */
    white-space: normal !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    line-height: 1.3 !important; /* Masaüstü ile aynı */
    display: flex !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2 !important;
    overflow: hidden !important;
    text-overflow: clip !important;
    padding: 1px !important; /* Çerçeveye 1px */
    justify-content: center !important; /* Masaüstü ile aynı */
    align-items: center !important;
    min-width: 0 !important;
  }
  /* Mobil: Marka/Model iki satır – "Marka /" üstte, "Model" altta (satıra geçme) */
  .list-header-row .list-cell.list-brand .header-first-line,
  .list-header-row .list-cell.list-brand .header-second-line {
    display: block !important;
    text-align: center !important;
    line-height: 1.25 !important;
  }
  .list-header-row .list-cell.list-type .header-first-line,
  .list-header-row .list-cell.list-type .header-second-line {
    display: block !important;
    text-align: center !important;
    line-height: 1.25 !important;
  }

  .list-header-row .list-cell.list-plate {
    justify-content: center !important; /* Masaüstü ile aynı */
    padding: 1px !important; /* Çerçeveye 1px */
  }

  .list-header-row .list-cell.list-km {
    justify-content: center !important; /* Masaüstü ile aynı */
    padding: 1px !important; /* Çerçeveye 1px */
  } 

  /* Mobil: overlay yüksekliği top-bottom ile (footer ile 10px boşluk style-core'da) */
  .tasitlar-modal-overlay {
    height: auto !important;
    max-height: calc(100vh - var(--modal-gap-above-footer) - var(--app-footer-height) - env(safe-area-inset-bottom, 0)) !important;
    max-height: calc(100dvh - var(--modal-gap-above-footer) - var(--app-footer-height) - env(safe-area-inset-bottom, 0)) !important;
  }
  /* iOS PWA: çentik (notch) alanı için üst padding (base kuralındaki padding-top:0'ı ezer) */
  @media (display-mode: standalone) {
    .tasitlar-modal-overlay {
      padding-top: env(safe-area-inset-top) !important;
    }
  }
  /* Ortak mobil container + iOS PWA: style-core.css (.modal-overlay .modal-container) */
  #vehicles-modal .modal-header h2 { 
    font-size: 21px !important; /* 20px + 1 punto (1px) */
    letter-spacing: 0.2em !important; /* Harfler arası boşluk artırıldı (0.15em → 0.2em) */
  }
  .tasitlar-modal-overlay .modal-close { font-size: 21px; }
  
  /* --- MODAL KARARTMA (mobil): overlay ile aynı alan (top 0, height 100%) --- */
  .tasitlar-modal-overlay::before {
    max-width: 100% !important;
    width: 100%;
    top: 0;
    height: 100%;
    left: 0;
    transform: none;
  }
  
  /* --- DETAY MODAL SCROLL & PADDING --- */
  #vehicle-detail-content {
    padding-top: 18px !important; /* Plaka üstten kesilmesin */
    padding-left: 8px !important; /* Çerçeve ile içerik arası – detay sayfası rahat olsun */
    padding-right: 8px !important;
  }
  #vehicle-detail-modal .modal-body { 
    overflow-y: auto !important;
    overflow-x: hidden !important; /* Sağa sola kaymayı engelle */
    padding-bottom: 40px !important; /* Chrome fix: Logoların kesilmemesi için artırıldı */
    -webkit-overflow-scrolling: touch;
    touch-action: pan-y !important; /* Sadece dikey kaydırma */
    overscroll-behavior-x: none !important; /* Yatay overscroll'u engelle */
  }
  
  /* Tüm taşıt modal body'leri için overflow-x kontrolü */
  .tasitlar-modal-overlay .modal-body {
    overflow-x: hidden !important; /* Sağa sola kaymayı engelle */
    touch-action: pan-y !important; /* Sadece dikey kaydırma */
    overscroll-behavior-x: none !important; /* Yatay overscroll'u engelle */
  }
  
  /* Plaka/marka font-size tek blokta (yukarıda); sadece margin */
  .detail-plate { margin-top: 0 !important; margin-bottom: 0 !important; } /* Plaka üstten kesilmesin */
  .detail-brand-year { margin-top: 0 !important; margin-bottom: 4px !important; }
  .detail-row { padding: 4px 0; gap: 1px; }
  /* Kullanıcı–Şube arası 1px azalt (4px→3px) */
  #vehicle-detail-modal .vehicle-detail-left .detail-row:first-child { padding-bottom: 3px !important; }
  
  /* Taşıt detay modal başlık +1 punto daha (sadece mobil) */
  #vehicle-detail-modal .modal-header h2 {
    font-size: 23px !important;
  }
  #vehicle-detail-modal .modal-close {
    font-size: 23px !important;
  }
  
  /* --- KAPORTA ŞEMASI MOBİL --- */
  #kaza-kaporta-container {
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important; /* Kaporta şeması yatayda ortalanmış */
    gap: 12px !important;
  }
  /* Taşıt detay: kaporta ekspertiz mobil – şema üstü boşluk az; şema kendi padding/margin yok */
  #detail-boya-container {
    margin-top: 34px !important; /* Kaporta Durumu etiketi ile blok arası 4px daha dar */ /* 58→50: “Aşağıdaki şemada…” ile şema arası 8px daraldı */
    gap: 3px 0 !important;
    row-gap: 3px !important;
    column-gap: 0 !important;
    justify-content: center !important;
    overflow: visible !important;
    padding: 0 !important;
  }
  #detail-boya-container .boya-legend {
    margin: -18px 0 0 0 !important; /* 4px daha dar – şema ile legend arası */
    padding: 0 !important;
    line-height: 1.2 !important;
    min-height: 0;
  }
  #detail-boya-container .kaporta-schema-wrapper {
    margin: -12px auto 0 auto !important; /* Yatayda ortala */
    transform: translateX(-6px) !important; /* 6px sola (2px daha sola) */
    padding: 0 !important; /* Şema üstünde kendi padding’i olmasın */
  }
  #kaza-kaporta-container {
    flex-direction: row !important;
    flex-wrap: nowrap !important;
    justify-content: flex-start !important;
    align-items: center !important;
    max-width: 100% !important;
    overflow: hidden !important;
  }
  #kaza-kaporta-container {
    flex-direction: row !important;
    flex-wrap: wrap !important;
    justify-content: center !important;
  }
  #kaza-kaporta-container {
    flex-direction: row !important;
    gap: 12px !important;
    transform: none !important;
    font-size: 12px !important; /* +1 punto daha (sadece mobil) */
    margin-top: 2px !important; /* O/B/D renk açıklamaları 2px aşağı */
    flex-shrink: 0 !important;
  }
  
  #detail-boya-container svg {
    width: 100px !important;
    height: 158px !important;
    transform: rotate(90deg) !important;
    transform-origin: center !important;
    flex-shrink: 0 !important;
    margin: 0 29px !important; /* Sadece yatay telafi; dikey 0 ile şema–legend boşluğu artmasın */
  }

  /* Detay modal: legend–footer arası boşluk 4px toplam (mobil) */
  #vehicle-detail-modal #vehicle-detail-content { padding-bottom: 4px !important; }
  #vehicle-detail-modal .modal-body { padding-bottom: 8px !important; }
  /* Plaka üstten kesilmesin */
  #vehicle-detail-content { padding-top: 18px !important; }
  .detail-plate-row { margin-top: 0 !important; margin-bottom: 0 !important; }
  .detail-plate { margin-top: 0 !important; }
  /* Marka/model satırı: Olay Ekle ve Tarihçe aynı satırda; tek padding */
  .detail-brand-year-row {
    flex-wrap: nowrap !important;
    padding-top: 1px !important;
    margin-top: 0 !important;
    position: relative;
    z-index: 1;
  }

  /* Taşıt detay: Olay Ekle ve Tarihçe mobilde +1pt (17px, hover 18px); Tarihçe rengi etiket beyazı */
  #vehicle-detail-modal .detail-brand-year-row .history-add-event-btn {
    font-size: 17px !important;
  }
  #vehicle-detail-modal .detail-brand-year-row .history-btn-minimal {
    font-size: 17px !important;
    color: var(--form-label-color) !important;
  }
  #vehicle-detail-modal .detail-brand-year-row .history-btn-minimal:hover {
    font-size: 18px !important;
  }

  #event-menu-modal .universal-back-bar {
    margin-top: -21px !important; /* Olay Ekle menü: sol ok + etiket 3px daha yukarı */
  }

  /* --- EVENT MENU LIST MOBİL --- (spesifik seçici: .modal-body button kuralını ezer) */
  #event-menu-list {
    align-items: flex-end !important; /* Mobilde sağa yaslı */
  }
  #event-menu-modal .modal-body #event-menu-list button {
    text-align: right !important;
    width: calc(100% - 20px) !important;
    max-width: calc(100% - 20px) !important;
    margin: 0 !important;
    font-size: 18px !important;
    padding-top: 14px !important;
    padding-bottom: 14px !important;
  }
}
